В код-сниппете ниже есть два типа:
* DB — слой обращения к базе данных,
* Handler — слой бизнес-логики.
Вместо реального запроса к БД в код-сниппете стоит заглушка: код просто ждёт секунду и отдаёт константу.
Скопируйте блок себе в IDE и допишите строчки кода:
Получение сигнала отмены контекста.
Отмена контекста через 500 миллисекунд.